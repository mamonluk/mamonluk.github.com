<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Android Week#9 Mar15, 2012</title>
   <meta name="author" content="Tom Preston-Werner" />
   <link href="http://feeds.feedburner.com/tom-preston-werner" rel="alternate" title="Tom Preston-Werner" type="application/atom+xml" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

   <!-- Typekit -->
   <script type="text/javascript" src="http://use.typekit.com/jpd0pfm.js"></script>
   <script type="text/javascript">try{Typekit.load();}catch(e){}</script>





<script language="JavaScript"> 
<!-- Original by http://javascript.internet.com More javascripts http://www.hypergurl.com 
--> var NS4 = (document.layers); // Which browser? var IE4 = (document.all); 
var win = window; // window to search. var n = 0; function findInPage(str) { var 
txt, i, found; if (str == "") return false; // Find next occurance of 
the given string on the page, wrap around to the // start of the page if necessary. 
if (NS4) { // Look for match starting at the current point. If not found, rewind 
// back to the first match. if (!win.find(str)) while(win.find(str, false, true)) 
n++; else n++; // If not found in either direction, give message. if (n == 0) 
alert("Not found."); } if (IE4) { txt = win.document.body.createTextRange(); 
// Find the nth match from the top of the page. for (i = 0; i <= n && 
(found = txt.findText(str)) != false; i++) { txt.moveStart("character", 
1); txt.moveEnd("textedit"); } // If found, mark it and scroll it into 
view. if (found) { txt.moveStart("character", -1); txt.findText(str); 
txt.select(); txt.scrollIntoView(); n++; } // Otherwise, start over at the top 
of the page and find first match. else { if (n > 0) { n = 0; findInPage(str); 
} // Not found anywhere, give message. else alert("Not found."); } } 
return false; } </script>



</head>
<body>

<!-- ClickTale Top part -->
<script type="text/javascript">
var WRInitTime=(new Date()).getTime();
</script>
<!-- ClickTale end of Top part -->

<div class="site">
  <div class="title">
    <a href="/">mamonluk</a>
    <a class="extra" href="/">home</a>
  </div>
  
  <div id="post">
<h1>Android Week#9 Mar15, 2012</h1>

<p class="meta">15 Mar 2012 - San Francisco</p>


<ul>
<li><p>hw for next week
A simple program. No layout defined ... design your own
A game that test your knowledge of states capitals
if city is given, name the state, if state is given, name the city</p></li>
<li><p><code>System.setProperty("Font", "Helvetica")</code></p></li>
<li><code>String System.getProperty("Font", "SansSerif")  //SansSerif is the default</code></li>
</ul>


<h3>Google has made another preference which is called shared preferences</h3>

<ul>
<li><code>SharedPreferences sp = getSharedPreferences("myfile", 0);</code>
// data file will be saved in this file the parameter 0 or MODE_PRIVATE means, the file is only accessible between the activities in your project.</li>
<li><p>SharedPreference sp = getPreferences(MODE_PRIVATE);
//SharedPreference is an interface and its using factory method<br/>
//the disadvantage of using this is doesnt save it to a file but instead memory</p></li>
<li><p><code>String myFont = sp.getString("Font", "xxx")</code></p>

<ul>
<li>//first param is the name of preference to be return, second param is the value to return if preference does not exists</li>
<li>//multiple variation getInteger, getDouble, getLong, etc</li>
</ul>
</li>
</ul>


<br/>


<h3>Populating data in the sharedPreference file</h3>

<p> <code>SharedPreferences.Editor ed = sp.edit();</code>
  <code>ed.putString("myCar", "Honda")</code>
  <code>ed.putInt("myAge", 82);</code>
  //diff variation i.e. putDouble, putLong
  <code>ed.commit();</code><br/>
  //ed.apply(); this is faster in terms of speed, this is only available only after version 2.7</p>

<ul>
<li><code>ed.clear</code> //remove everything from the sharedPreference</li>
<li><code>ed.remove(String key);</code> //remove specific key in sharedPreference</li>
</ul>


<h3>Methods for SharedPreferences</h3>

<ul>
<li><code>boolean sp.contain(String key);</code></li>
<li><code>Map&lt;String, ?&gt; getAll()</code></li>
</ul>


<h3>Different types of storage</h3>

<ul>
<li>Internal Storage - disadvantage of using this is it is save in memory so you cannot transfer it</li>
<li>External Sotrage SD card -</li>
<li>sqlite</li>
<li>Network Connection (Cloud)</li>
</ul>


<h3>Saving data to to Internal Storage</h3>

<div class="highlight"><pre><code class="java"><span class="n">String</span> <span class="n">str</span><span class="o">=</span><span class="s">&quot;this line will be saved internally&quot;</span><span class="o">;</span>
<span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="n">openFileOutput</span><span class="o">(</span><span class="s">&quot;myFile&quot;</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_PRIVATE</span><span class="o">);</span>
                                                     <span class="c1">//.MODE_APPEND</span>
                                                     <span class="c1">//.MODE_WORLD_WRITABLE</span>
<span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
<span class="n">fos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">*</span> <span class="n">Make</span> <span class="n">sure</span> <span class="n">to</span> <span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span> <span class="n">and</span> <span class="kn">import</span> <span class="nn">android.content.SharedPreferences</span><span class="o">;</span>
<span class="o">*</span> <span class="n">Entire</span> <span class="n">i</span><span class="o">/</span><span class="n">o</span> <span class="n">classes</span> <span class="n">in</span> <span class="n">java</span> <span class="n">is</span> <span class="n">included</span> <span class="n">in</span> <span class="n">android</span><span class="o">.</span>
</code></pre>
</div>




<div class="highlight"><pre><code class="java"><span class="n">String</span> <span class="n">str</span><span class="o">=</span><span class="s">&quot;this line will be saved internally&quot;</span><span class="o">;</span>
<span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="n">openFileOutput</span><span class="o">(</span><span class="s">&quot;myFile&quot;</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_PRIVATE</span><span class="o">);</span>
                                                     <span class="c1">//.MODE_APPEND</span>
                                                     <span class="c1">//.MODE_WORLD_WRITABLE</span>
<span class="n">PrintWriter</span> <span class="n">pw</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrintWriter</span><span class="o">(</span><span class="n">fos</span><span class="o">);</span>
<span class="n">fos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</code></pre>
</div>


<h3>Side Note</h3>

<ul>
<li>There are alot of classes in java for i/o but you only need to use two classes <code>PrintWriter</code> and <code>Scanner</code>
  <em><code>PrintWriter</code> - this is for output, can be used for println, print, printf
  </em><code>Scanner</code> - this is for input</li>
</ul>


<h3>Retrieving data from Internal Storage</h3>

<div class="highlight"><pre><code class="java"><span class="n">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="n">openFileInput</span><span class="o">(</span><span class="s">&quot;myFile&quot;</span><span class="o">)</span>
<span class="n">Scanner</span> <span class="n">sc</span><span class="o">=</span><span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">fis</span><span class="o">);</span>
<span class="k">while</span><span class="o">(</span><span class="n">sc</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span>
<span class="o">{</span>
    <span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
    <span class="o">----</span>
    <span class="o">----</span>
<span class="o">}</span>
<span class="n">fis</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</code></pre>
</div>


<h3>Checking if SD card is available or not</h3>

<div class="highlight"><pre><code class="java"><span class="kt">boolean</span> <span class="n">storageAvailable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

<span class="kt">boolean</span> <span class="n">storageWritable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

<span class="n">String</span> <span class="n">state</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorage</span><span class="o">.</span><span class="na">state</span><span class="o">();</span>

<span class="k">if</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">MEDIA_MOUNTED</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">state</span><span class="o">))</span>
<span class="o">{</span>
    <span class="n">storageAvailable</span> <span class="o">=</span> <span class="n">StorageWritable</span> <span class="o">=</span><span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>
<span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">MEDIA_MOUNTED_READ_ONLY</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">state</span><span class="o">))</span>
<span class="o">{</span>
    <span class="n">storageAvailable</span><span class="o">=</span><span class="kc">true</span><span class="o">;</span>
    <span class="n">storageWritable</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>
<span class="k">else</span>
    <span class="n">storageAvailable</span><span class="o">=</span><span class="n">storageWritable</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
</code></pre>
</div>


<h3>Saving data to External Storage SD Card</h3>

<ul>
<li>MODE_WORLD_READABLE - make sure this is the param</li>
<li>You need to make sure if SD card is available or not</li>
</ul>


<div class="highlight"><pre><code class="java"><span class="n">String</span> <span class="n">str</span><span class="o">=</span><span class="s">&quot;This line will be saved in the SD Card&quot;</span>
<span class="k">try</span><span class="o">{</span>
    <span class="n">File</span> <span class="n">sdCard</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorage</span><span class="o">.</span><span class="na">Directory</span><span class="o">();</span>
    <span class="n">File</span> <span class="n">dir</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">sdCard</span><span class="o">,</span> <span class="n">getAbsolutePath</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;/MyFile&quot;</span><span class="o">);</span>
    <span class="n">dir</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">();</span>   <span class="c1">//going inside the directory</span>
    <span class="n">File</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">dir</span><span class="o">,</span> <span class="s">&quot;textFile.txt&quot;</span><span class="o">);</span>
    <span class="n">PrintWriter</span> <span class="n">pw</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrintWriter</span><span class="o">(</span><span class="n">f</span><span class="o">);</span>
    <span class="n">pw</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
    <span class="n">pw</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
    <span class="n">pw</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>  <span class="o">.....</span>  <span class="o">}</span>
</code></pre>
</div>


<h3>Load data from SD Card..</h3>

<div class="highlight"><pre><code class="java"><span class="n">File</span> <span class="n">sdCard</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">();</span>
<span class="n">File</span> <span class="n">dir</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">sdCard</span><span class="o">.</span><span class="na">getAbsolutPath</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;/MyFile&quot;</span><span class="o">);</span>
<span class="n">File</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">dir</span><span class="o">,</span> <span class="s">&quot;textFile.txt&quot;</span><span class="o">);</span>  <span class="c1">//you cannot use scanner directly here bec. Scanner assumes you are going to parse it</span>
<span class="n">Scanner</span> <span class="n">sc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">f</span><span class="o">);</span>
<span class="k">while</span><span class="o">(</span><span class="n">sc</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span>
<span class="o">{</span>
    <span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>  
    <span class="o">----</span>
    <span class="o">----</span>
<span class="o">}</span>
</code></pre>
</div>




</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>03 May 2012</span> &raquo; <a href="/2012/05/03/Android_week14.html">Android Week#14 May03, 2012</a></li>
    
      <li><span>26 Apr 2012</span> &raquo; <a href="/2012/04/26/Android_week13.html">Android Week#13 Apr12, 2012</a></li>
    
      <li><span>19 Apr 2012</span> &raquo; <a href="/2012/04/19/Android_week12.html">Android Week#12 Apr12, 2012</a></li>
    
  </ul>
</div>
  
  <div class="footer">
    <div class="contact">
      <p>
        mamonluk<br />
		website
        
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="https://github.com/mamonluk">github.com/mamonluk</a><br />
		<a href="http://whatsnerdy.com">whatsnerdy</a><br/>
      </p>
    </div>
    
  </div>
</div>

<a href="http://github.com/mojombo"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>

<!-- ClickTale Bottom part -->
<div id="ClickTaleDiv" style="display: none;"></div>
<script type="text/javascript">
if(document.location.protocol!='https:')
  document.write(unescape("%3Cscript%20src='http://s.clicktale.net/WRb.js'%20type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
if(typeof ClickTale=='function') ClickTale(206,0.3,"www03");
</script>
<!-- ClickTale end of Bottom part -->

<!-- Google Analytics -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-6016902-1");
pageTracker._trackPageview();
</script>
<!-- Google Analytics end -->



<form 
name="search" onSubmit="return findInPage(this.string.value);"> 
<div align="center"> <p><font size=3> <input name="string" 
type="text" size=15 onChange="n = 0;"> </font> <input 
type="submit" value="Search Page"> </p> </div> 
</form>
</body>
</html>
